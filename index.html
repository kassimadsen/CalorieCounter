<!DOCTYPE html>
<html lang="en">
	<head>
		<link
			rel="stylesheet"
			href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css"
		/>
		<style>
			.btn-outline-purple {
				color: #fff;
				border-color: #6f42c1;
				background-color: transparent;
			}
			.btn-outline-purple:hover,
			.btn-outline-purple:focus {
				color: #fff;
				background-color: #6f42c1;
				border-color: #6f42c1;
			}
		</style>
	</head>

	<body style="background-color: #000">
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<nav
						class="navbar navbar-dark"
						style="background-color: #6f42c1"
					>
						<span class="navbar-brand">Calorie Tracker</span>
						<a
							href="/home"
							class="navbar-brand"
							>Home</a
						>
					</nav>
				</div>
			</div>
			<br />
		</div>
		<div class="container">
			<div class="row">
				<div class="col-md-12">
					<div class="card text-white bg-dark mb-3">
						<div class="card-body">
							<div
								class="d-flex justify-content-between align-items-center mb-3"
							>
								<button
									id="prev-day"
									class="btn btn-outline-purple btn-sm"
								>
									&lt;
								</button>
								<h5
									class="card-title mb-0"
									id="journal-date"
								></h5>
								<button
									id="next-day"
									class="btn btn-outline-purple btn-sm"
								>
									&gt;
								</button>
							</div>
							<table
								class="table table-dark table-bordered"
								id="meals-table"
							>
								<thead>
									<tr>
										<th style="width: 20%">Food Item</th>
										<th style="width: 20%">Carbs</th>
										<th style="width: 20%">Protein</th>
										<th style="width: 20%">Fats</th>
										<th style="width: 20%">Calories</th>
										<th style="width: 10%">Remove Item</th>
									</tr>
								</thead>
								<tbody id="meals"></tbody>
							</table>
							<button
								id="add-row"
								class="btn btn-outline-purple"
								type="button"
							>
								Add Item
							</button>
						</div>
					</div>
				</div>
			</div>
		</div>
		<script>
			// Set up date navigation
			let currentDate = new Date();

			function updateJournalDate() {
				const options = {
					year: 'numeric',
					month: 'long',
					day: 'numeric',
				};
				document.getElementById('journal-date').textContent =
					currentDate.toLocaleDateString(undefined, options);
			}

			document.getElementById('prev-day').onclick = function () {
				const prev = new Date(currentDate);
				prev.setDate(prev.getDate() - 1);
				currentDate = prev;
				updateJournalDate();
			};

			document.getElementById('next-day').onclick = function () {
				const next = new Date(currentDate);
				next.setDate(next.getDate() + 1);
				currentDate = next;
				updateJournalDate();
			};

			// Initialize with today's date
			currentDate = new Date();
			updateJournalDate();

			// Add and remove row functionality
			const tbody = document.getElementById('meals');
			document.getElementById('add-row').onclick = function () {
				const tr = document.createElement('tr');
				tr.innerHTML = `
            <td contenteditable="true" style="background-color: #222; color: #fff;"></td>
            <td contenteditable="true" style="background-color: #222; color: #fff;"></td>
            <td contenteditable="true" style="background-color: #222; color: #fff;"></td>
			<td contenteditable="true" style="background-color: #222; color: #fff;"></td>
			<td contenteditable="true" style="background-color: #222; color: #fff;"></td>
            <td><button class="btn btn-sm remove-row" style="background-color: #6f42c1">&times;</button></td>
        `;
				tbody.appendChild(tr);
			};

			tbody.addEventListener('click', function (e) {
				if (e.target && e.target.classList.contains('remove-row')) {
					const row = e.target.closest('tr');
					if (row) row.remove();
				}
			});
		</script>
	</body>
</html>
